<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
        <title>Galeri Desa Tegal</title>
        <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700&amp;display=swap">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Kaushan+Script&amp;display=swap">
        <link rel="stylesheet" href="/fonts/fontawesome-all.min.css">
        <link rel="stylesheet" href="/fonts/font-awesome.min.css">
        <link rel="stylesheet" href="/fonts/fontawesome5-overrides.min.css">
        <link rel="stylesheet" href="/css/aos.min.css">
        <link rel="stylesheet" href="/css/animate.min.css">
        <link rel="stylesheet" href="/css/Articles-Cards-images.css">
        <link rel="stylesheet" href="/css/styles.css">
    </head>
   <body id="page-top" data-bs-spy="scroll" data-bs-target="#mainNav" data-bs-offset="54">
    <nav class="navbar navbar-expand-lg fixed-top navbar-dark navbar-shrink" id="mainNav" style="color: rgb(255,131,131);background: #072e48;border-color: var(--bs-code-color);--bs-primary: #221e12;--bs-primary-rgb: 34,30,18;">
        <div class="container">
            <button data-bs-toggle="collapse" data-bs-target="#navbarResponsive" class="navbar-toggler navbar-toggler-right" type="button" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><i class="fa fa-bars"></i></button>
            <div class="d-flex align-items-center">
                <img id="navLogo" class="img-fluid" src="/img/logo_pemkab_bogor.png" width="40" height="40">
                <div class="ms-2 nav-text-container">
                    <div id="navTextTop">KECAMATAN KEMANG</div>
                    <div id="navTextBottom">KABUPATEN BOGOR</div>
                </div>
            </div>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto text-uppercase">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#layanan" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="font-weight: bold;">
                            Profil Desa
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item active" href="/sejarah">Sejarah Desa</a></li>
                            <li><a class="dropdown-item" href="/visimisi">Visi dan Misi</a></li>
                            <li><a class="dropdown-item" href="/struktur">Struktur Organisasi</a></li>
                            <li><a class="dropdown-item" href="/demografi">Demografi</a></li>
                        </ul>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="/">Beranda</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#kegiatan">Kegiatan</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#layanan">Layanan</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#berita">Berita</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#lokasi">Lokasi</a></li>
                    <% if (isAdmin) { %>
                                          <li class="nav-item dropdown" id="adminDropdown">
                                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownAdmin" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                              Admin
                                            </a>
                                            <ul class="dropdown-menu" aria-labelledby="navbarDropdownAdmin">
                                              <li><a class="dropdown-item" href="/admin/dashboard">Dashboard</a></li>
                                              <li><a class="dropdown-item" href="/admin/logout">Logout</a></li>
                                            </ul>
                                          </li>
                                        <% }%>
                </ul>
            </div>
        </div>
    </nav>
            <div class="content">
                <div id="galeri" class="section py-5">
                    <div class="container" style="margin-top: 40px; margin-bottom: 50px;">
                        <div class="row mb-5">
                            <div class="col-lg-6 mx-auto text-center">
                                <h2 class="text-uppercase mb-3">Galeri Foto</h2>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3">
                                <div class="category-filter card">
                                    <div class="card-header bg-primary text-white">
                                        <h5 class="mb-0">Kategori</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="categoryList">
                                            <!-- Category checkboxes will be dynamically inserted here -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-9">
                                <div class="row gallery-container">
                                    <% images.forEach(image => { %>
                                        <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                                            <div class="galeri-item">
                                                <img src="data:image/jpeg;base64,<%= image.galeri_img %>" class="img-fluid" alt="<%= image.title %>">
                                                <div class="galeri-caption">
                                                    <h5><%= image.title %></h5>
                                                </div>
                                            </div>
                                        </div>
                                    <% }) %>
                                </div>  
                            </div>
                        </div>                      
                    </div>
                </div>
            </div>
            <footer class="py-3" style="color: rgb(255,255,255); background: #041d2d;">
                <div class="container">
                    <div class="row">
                        <div class="col-12 text-center">
                            <span class="copyright">Copyright Â© Desa Tegal 2024</span>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </body>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
<script src="/js/bs-init.js"></script>
<script src="/js/js/aos.min.js"></script>
<script src="/js/js/bs-init.js"></script>
<script src="/js/js/agency.js"></script>
<script src="/js/js/bs-init-1.js"></script>
    <script>
        const galleryItems = JSON.parse('<%- JSON.stringify(images) %>');

        function renderGallery(items) {
            const container = document.querySelector('.gallery-container');
            container.innerHTML = '';
            items.forEach(item => {
                const div = document.createElement('div');
                div.className = 'col-lg-3 col-md-4 col-sm-6 mb-4';
                div.innerHTML = `
                    <div class="galeri-item">
                        <img src="data:image/jpeg;base64,${item.galeri_img}" class="img-fluid" alt="${item.title}">
                        <div class="galeri-caption">
                            <h5>${item.title}</h5>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });
        }
        document.addEventListener('DOMContentLoaded', () => {
            renderCategories();
            renderGallery(galleryItems);
            document.getElementById('categoryList').addEventListener('change', filterGallery);
        });

        function renderCategories() {
            const categories = [...new Set(galleryItems.map(item => item.kategori))];
            console.log('Categories:', categories); // Debug log
            const categoryList = document.getElementById('categoryList');
            categories.forEach(category => {
                const div = document.createElement('div');
                div.className = 'form-check';
                div.innerHTML = `
                    <input class="form-check-input" type="checkbox" value="${category}" id="${category}">
                    <label class="form-check-label" for="${category}">${category}</label>
                `;
                categoryList.appendChild(div);
            });
        }

        function filterGallery() {
            const checkedCategories = Array.from(document.querySelectorAll('#categoryList input:checked')).map(input => input.value);
            const filteredItems = checkedCategories.length > 0
                ? galleryItems.filter(item => checkedCategories.includes(item.kategori))
                : galleryItems;
            renderGallery(filteredItems);
        }
    </script>
</html>
